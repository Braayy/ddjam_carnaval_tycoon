[gd_scene load_steps=11 format=3 uid="uid://dopl3had07tgm"]

[ext_resource type="Script" path="res://scripts/Camera.gd" id="1_qjuvd"]
[ext_resource type="Script" path="res://scripts/world.gd" id="1_v54f7"]
[ext_resource type="PackedScene" uid="uid://dbi1ugyp8rd08" path="res://scenes/UI.tscn" id="2_c8o3h"]
[ext_resource type="MeshLibrary" uid="uid://ciw2k8tki3nqf" path="res://assets/tiles.tres" id="3_6c1tu"]
[ext_resource type="Script" path="res://scripts/CharacterBody3D.gd" id="4_4v8ml"]
[ext_resource type="Texture2D" uid="uid://btsr6f0brtl7w" path="res://assets/texturas/mario.png" id="4_cra5g"]
[ext_resource type="Script" path="res://scripts/MovementViewer.gd" id="4_iwscj"]

[sub_resource type="Environment" id="Environment_d2uyj"]
ambient_light_color = Color(1, 1, 1, 1)

[sub_resource type="Curve3D" id="Curve3D_uduc8"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_ev5fk"]

[node name="World" type="Node3D"]
script = ExtResource("1_v54f7")

[node name="UI" parent="." instance=ExtResource("2_c8o3h")]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_d2uyj")

[node name="Camera" type="Camera3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.573576, 0.819152, 0, -0.819152, 0.573576, 17.3325, 6.39722, 0)
script = ExtResource("1_qjuvd")
speed = 10.0
deadzone_radius = 20.0
min_zoom = -5.0
max_zoom = 5.0
zoom_speed = 0.5

[node name="MovementViewer" type="Line2D" parent="Camera"]
width = 1.0
default_color = Color(1, 0, 0, 1)
script = ExtResource("4_iwscj")
color_speed = 0.5

[node name="GridMap" type="GridMap" parent="."]
mesh_library = ExtResource("3_6c1tu")
cell_size = Vector3(2, 4, 2)
cell_center_y = false
data = {
"cells": PackedInt32Array(8, 65530, 2, 8, 65531, 2, 8, 65532, 2, 8, 65533, 2, 8, 65534, 2, 8, 65535, 2, 8, 0, 2, 8, 1, 2, 7, 1, 1, 7, 0, 1, 7, 65533, 1, 7, 65532, 1, 7, 65531, 0, 7, 65530, 1, 9, 65530, 1048576, 9, 65531, 1, 9, 65532, 0, 9, 65533, 1, 9, 0, 1, 9, 1, 1, 9, 65535, 0, 9, 65534, 0, 7, 65534, 0, 7, 65535, 0, 7, 65528, 0, 9, 65527, 0, 8, 65529, 2, 8, 65528, 2, 8, 65527, 2, 7, 65529, 1, 7, 65527, 1, 9, 65528, 1, 9, 65529, 1, 8, 65526, 655363, 9, 65526, 1048578, 10, 65526, 1048578, 11, 65526, 1048578, 12, 65526, 1048578, 13, 65526, 1048578, 14, 65526, 1048578, 15, 65526, 1048578, 16, 65526, 1048578, 17, 65526, 1048580, 17, 65525, 2, 17, 65524, 2, 17, 65527, 2, 17, 65528, 2, 18, 65526, 1441794, 19, 65526, 1441794, 17, 65529, 1441793, 16, 65527, 1048576, 16, 65528, 1441793, 16, 65529, 1441793, 18, 65527, 1441793, 18, 65528, 1441793, 18, 65529, 1048576, 19, 65527, 1441793, 20, 65527, 1048576, 20, 65526, 1441793, 20, 65525, 1441793, 19, 65525, 1048576, 18, 65525, 1441793, 18, 65524, 1441793, 18, 65523, 1048576, 17, 65523, 1048576, 16, 65523, 1048576, 16, 65524, 1441793, 16, 65525, 1441793, 15, 65525, 1048576, 14, 65525, 1441793, 13, 65525, 1441793, 12, 65525, 1048576, 11, 65525, 1441793, 10, 65525, 1441793, 7, 65526, 1441793, 9, 65525, 1441793, 8, 65525, 1048576, 7, 65525, 1441793, 15, 65527, 1048577, 14, 65527, 1048576, 13, 65527, 1048577, 12, 65527, 1048576, 11, 65527, 1048577, 10, 65527, 1048577)
}
metadata/_editor_floor_ = Vector3(0, 0, 0)

[node name="Path" type="Path3D" parent="."]
curve = SubResource("Curve3D_uduc8")

[node name="PathFollow" type="PathFollow3D" parent="Path"]
transform = Transform3D(0.999894, 0, -0.0138869, 0, 1, 0, 0.0138869, 0, 0.999895, 17.3791, 0, 2.91997)

[node name="CharacterBody3D" type="CharacterBody3D" parent="Path/PathFollow"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
script = ExtResource("4_4v8ml")
speed = 5.0
metadata/_edit_group_ = true

[node name="Sprite3D" type="Sprite3D" parent="Path/PathFollow/CharacterBody3D"]
transform = Transform3D(0.115, 0, 0, 0, 0.0659613, 0.0942025, 0, -0.0942025, 0.0659613, 0, 0, 0)
billboard = 1
texture = ExtResource("4_cra5g")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Path/PathFollow/CharacterBody3D"]
shape = SubResource("CapsuleShape3D_ev5fk")

[node name="NavigationAgent3D" type="NavigationAgent3D" parent="Path/PathFollow/CharacterBody3D"]

[connection signal="camera_pan" from="UI" to="Camera" method="_on_ui_camera_pan"]
[connection signal="view_path" from="UI" to="Camera" method="_on_ui_view_path"]
